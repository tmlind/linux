# SPDX-License-Identifier: GPL-2.0-only OR BSD-2-Clause
%YAML 1.2
---
$id: http://devicetree.org/schemas/phy/motorola,mapphone-mdm6600.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Motorola Mapphone MDM6600 and MDM9600 USB PHY

maintainers:
  - Tony Lindgren <tony@atomide.com>

description: |
  USB PHY found on Motorola Mapphone devices integrated in the MDM6600 and
  MDM9600 modems.

properties:
  compatible:
    enum:
      - motorola,mapphone-mdm6600
      - motorola,mapphone-mdm9600

  clocks:
    maxItems: 1

  clock-names:
    maxItems: 1
    description: MDM9600 USB PHY clock

  "#phy-cells":
    const: 0

  enable-gpios:
    maxItems: 1
    description: Enable gpio

  power-gpios:
    maxItems: 1
    description: Power gpio

  reset-gpios:
    maxItems: 1
    description: Reset gpio

  motorola,mode-gpios:
   minItems: 2
   maxItems: 2
   description: Modem mode gpios

  motorola,cmd-gpios:
   minItems: 3
   maxItems: 3
   description: Modem command gpios

  motorola,status-gpios:
   minItems: 3
   maxItems: 3
   description: Modem status gpios

required:
  - compatible
  - "#phy-cells"
  - enable-gpios
  - power-gpios
  - reset-gpios
  - motorola,mode-gpios
  - motorola,cmd-gpios
  - motorola,status-gpios

allOf:
  - if:
      properties:
        compatible:
          contains:
            enum:
              - motorola,mapphone-mdm9600
    then:
      properties:
        motorola,cmd-gpios:
          maxItems: 2
        clocks:
          minItems: 1
          maxItems: 1
        clock-names:
          items:
            - const: main_clk

additionalProperties: false

examples:
  - |
    #include <dt-bindings/gpio/gpio.h>

    usb-phy {
        compatible = "motorola,mapphone-mdm6600";
        #phy-cells = <0>;
        enable-gpios = <&gpio3 31 GPIO_ACTIVE_LOW>;
        power-gpios = <&gpio2 22 GPIO_ACTIVE_HIGH>;
        reset-gpios = <&gpio2 17 GPIO_ACTIVE_HIGH>;
        motorola,mode-gpios = <&gpio5 20 GPIO_ACTIVE_HIGH>,
                              <&gpio5 21 GPIO_ACTIVE_HIGH>;
        motorola,cmd-gpios = <&gpio4 7 GPIO_ACTIVE_HIGH>,
                             <&gpio4 8 GPIO_ACTIVE_HIGH>,
                             <&gpio5 14 GPIO_ACTIVE_HIGH>;
        motorola,status-gpios = <&gpio2 20 GPIO_ACTIVE_HIGH>,
                                <&gpio2 21 GPIO_ACTIVE_HIGH>,
                                <&gpio2 23 GPIO_ACTIVE_HIGH>;
    };
